<head>
<!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src"main.js"></script>
    <script>
        $(document).ready(() => {
            console.log('works');
            let counter = 0;
            var input = document.getElementById('file-upload');
            var plotPlace = document.getElementById('div1');
            var reader = new FileReader();
            var allTraces = [];
            var layout = {
                xaxis: { title: 'X' },
                yaxis: { title: 'Y' },
                title: 'Simple graph'
            };

            $('#plot-button').on('click', () => {
                counter++;
                let trace = { x: [], y: [], mode: 'lines+markers' };
                // console.log(input.files[0]);
                var file = input.files[0];
                reader.readAsText(file);
                reader.onload = () => {
                    var text = reader.result;
                    var arr = text.split("\n");
                    let tmp;
                    for (let pair of arr) {
                        tmp = pair.split(" ");
                        trace.x.push(tmp[0]);
                        trace.y.push(tmp[1]);
                    }
                    allTraces.push(trace);

                    // console.log(data);
                    var data = [trace];

                    Plotly.plot(plotPlace, data, layout);
                    console.log(Plotly);
                }
            })

            $('#reset-button').on('click', () => {
                Plotly.purge(plotPlace);
            })
        })
    </script>
    <style>
        g.g-ytitle>text.ytitle { transform: rotate(0); }
        .my-button {
            -webkit-appearance: none;
            appearance: none;
            background-color: #424a92;
            color: #ffffff;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            padding: 5px 10px;
        }
    </style>
</head>

<body>

    <div id="div1"></div>
    <div id="div2"></div>

    <input id="file-upload" type="file">
    <button id="plot-button" type="button" class="my-button">Plot it!</button>
    <button id="reset-button" type="button" class="my-button">Reset graph!</button>
</body>